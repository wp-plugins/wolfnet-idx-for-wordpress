"function"!==typeof String.prototype.trim&&(String.prototype.trim=function(){return this.replace(/^\s+|\s+$/g,"")});
"undefined"!=typeof jQuery&&function(c){var b=null,i=null,g=null,j=null,m=null,h=null,f={feat:{title:"Featured Listings",uri:"-options-featured",shortcode:"wnt_featured"},grid:{title:"Listing Grid",uri:"-options-grid",shortcode:"wnt_grid"},list:{title:"Property List",uri:"-options-list",shortcode:"wnt_list"},srch:{title:"Quick Search",uri:"-options-quicksearch",shortcode:"wnt_search"}},p=function(){if(b==null||!b instanceof jQuery){b=c("<div>").dialog({modal:true,autoOpen:false,height:450,width:475,
title:"WolfNet Shortcode Builder",close:function(){k("menu");b.find("form").trigger("reset")}});o();h=c('<div id="wolfnetShortcodeBuilder_loader" />').hide().appendTo(b).css({position:"absolute",top:0,left:0,width:"100%",height:"100%",backgroundColor:"white",opacity:0.5});c('<img src="'+m+'" />').appendTo(h).css({display:"block",position:"absolute",left:"49%",top:"49%"})}},o=function(){var a="",d;for(d in f){a=a+'<button class="button" style="display:block;width:75%;margin: 0px auto 10px auto;" ';
a=a+('wolfnet:id="'+d+'"');a=a+">";a=a+f[d].title;a=a+"</button>"}g=c('<div id="wolfnetShortcodeBuilder_menu"/>').append(a).appendTo(b);c('<button id="wolfnetShortcodeBuilder_back" class="button">Back</button>').prependTo(b).hide().click(function(){k("menu")});g.find("button").click(function(){var a=c(this).attr("wolfnet:id");k(a)})},k=function(a){b.find("div#wolfnetShortcodeBuilder_"+a).length==0&&q(a);g.hide();if(a!="menu"){b.find("button#wolfnetShortcodeBuilder_back").show();b.dialog({title:"WolfNet Shortcode Builder - "+
f[a].title})}else{b.find("button#wolfnetShortcodeBuilder_back").hide();b.dialog({title:"WolfNet Shortcode Builder"})}g=b.find("div#wolfnetShortcodeBuilder_"+a).show();g.find(".modeField input").trigger("ready")},q=function(a){var d=c('<div id="wolfnetShortcodeBuilder_'+a+'"/>').appendTo(b).hide();c.ajax({url:j+f[a].uri,success:function(b){var e=c("<form />").attr("wolfnet:sc",f[a].shortcode).append(b).append(c('<button type="submit" class="button button-primary" style="position:absolute;bottom:15px;right:15px;">Insert</button>')).submit(function(a){a.preventDefault();
r.call(e);return false}).appendTo(d);wolfnet.initMoreInfo(e.find(".wolfnet_moreInfo"));switch(a){case "grid":case "list":e.wolfnetListingGridControls();break;case "feat":e.wolfnetFeaturedListingsControls()}},beforeSend:function(){h.show()},complete:function(){h.hide()}})},r=function(){s.call(this,function(a){i!=null&&i.execCommand("mceInsertContent",false,a);b.dialog("close")})},s=function(a){var d={},b="["+this.attr("wolfnet:sc")+" /]",e=["mode","savedsearch","criteria"],g=this.find('input[type="radio"][name="mode"][value="advanced"]:first:checked'),
f=this.find('select[name="savedsearch"]:first');this.find("input, select").each(function(){if(this.name!=""&&c.inArray(this.name,e)==-1)switch(this.type){default:this.value.trim()!=""&&(d[this.name]=this.value.trim());break;case "checkbox":case "radio":if(this.checked==true)d[this.name]=this.value}});if(g.length!=0&&f.length!=0){delete d.zipcode;delete d.city;delete d.minprice;delete d.maxprice;c.ajax({url:j+"-saved-search",type:"GET",dataType:"json",data:{ID:f.val()},success:function(c){for(var e in c)d[e]=
c[e];n(d,b,a)},beforeSend:function(){h.show()},complete:function(){h.hide()}})}else n(d,b,a)},n=function(a,b,c){for(var e in a)b=b.replace("/]"," "+e+'="'+a[e]+'" /]');c(b)},l={init:function(a){a=a||{};j=a.rootUri||null;m=a.loaderUri||null;p()},open:function(a){b.dialog("open");i=a||window.tineyMCE||null}};c.fn.wolfnetShortcodeBuilder=function(a){if(l[a])return l[a].apply(this,Array.prototype.slice.call(arguments,1));if(typeof a==="object"||!a)return l.init.apply(this,arguments);c.error("Method "+
a+" does not exist in jQuery.wolfnetShortcodeBuilder")}}(jQuery);
