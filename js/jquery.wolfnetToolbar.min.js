"undefined"!=typeof jQuery&&function(b){var m=function(b){b=b.toString();b=b.split(".")[0];b=b.split("").reverse().join("").replace(/(\d{3}(?!$))/g,"$1,").split("").reverse().join("");return"$"+b};String.prototype.wntTruncateString=function(b,h){h=h||"...";b-=h.length;return this.length>b?this.valueOf().substr(0,b)+h:this.valueOf()};b.fn.wolfnetToolbar=function(i){var i=b.extend({sort:"",max_results:250,criteria:{}},i),h=function(){return b("<span>").addClass("wolfnet_page_items_select").append(b("<select>").change(function(a){b(this).trigger("wolfnet.itemsPerPage",
[b(this).val(),this]);a.preventDefault();return!1}).append(l.call(this))).append("per page")},l=function(){var a=b(this);a.bind("wolfnet.toolbarsRendered",function(){var d=a.find(".wolfnet_page_items_select select"),e=a.data("state");b.ajax({url:"?pagename=wolfnet-get-showNumberOfListings-dropdown",dataType:"json"}).done(function(a){d.children().remove();if(-1==b.inArray(e.numrows,a)){for(var f=[],g=!1,j=0;j<a.length;j++)!g&&a[j]>e.numrows&&(f[f.length]=e.numrows,g=!0),f[f.length]=a[j];a=f}for(f=
0;f<a.length;f++)g=b("<option>",{value:a[f],text:a[f]}),a[f]==e.numrows&&g.attr("selected","selected"),d.append(g)})});return""},o=function(){return b("<span>").addClass("wolfnet_sortoptions").append(b("<select>").change(function(a){b(this).trigger("wolfnet.sortChange",[b(this).val(),this]);a.preventDefault();return!1}).append(n.call(this)))},n=function(){var a=b(this);a.bind("wolfnet.toolbarsRendered",function(){var d=a.find(".wolfnet_sortoptions select");a.data("state");b.ajax({url:"?pagename=wolfnet-get-sortOptions-dropdown",
dataType:"json"}).done(function(a){d.children().remove();for(var c=0;c<a.length;c++)d.append(b("<option>",{value:a[c].value,text:a[c].label}))})});return""},p=function(a,d){var e=b(this),c=e.data("state");if(!c.refreshing){var f=e.data("wolfnet.toolbarData"),g=b.extend(c,f.criteria);g.ownerType=f.ownerType;delete g.pagename;b.ajax({url:"?pagename=wolfnet-listings-get",dataType:"json",data:g,beforeSend:function(){c.refreshing=!0;e.find(".wolfnet_listings").addClass("wolfnet_refreshing")}}).done(function(a){e.trigger("wolfnet.dataLoaded",
[a,d])}).always(function(){c.refreshing=!1;e.find(".wolfnet_listings").removeClass("wolfnet_refreshing")})}},q=function(a,d){var e=b(this).data("state"),c=Number(e.startrow)-Number(e.numrows);1>c&&(c=e.max_results-e.numrows+1);1>c&&(c=e.startrow);!e.refreshing&&1<=c&&(e.startrow=c,b(this).data("state",e),b(this).trigger("wolfnet.refreshData",d))},r=function(a,d){var e=b(this).data("state"),c=Number(e.startrow)+Number(e.numrows);c>=e.max_results&&(c=1);!e.refreshing&&c<=e.max_results&&(e.startrow=
c,b(this).data("state",e),b(this).trigger("wolfnet.refreshData",[d]))},s=function(a,d,e){a=b(this).data("state");!a.refreshing&&d<=a.max_results&&(a.numrows=Number(d),a.startrow=1,b(this).data("state",a),b(this).find(".wolfnet_page_items_select select").val(d),b(this).trigger("wolfnet.refreshData",[e]))},t=function(a,d,e){a=b(this).data("state");!a.refreshing&&d!=a.sort&&(a.sort=d,b(this).data("state",a),b(this).find(".wolfnet_sortoptions select").val(d),b(this).trigger("wolfnet.refreshData",[e]))},
w=function(a,d,e){var a=b(this),c=a.data("state"),f=c.startrow,g=c.numrows,c=c.sort;a.find(".wolfnet_listing").remove();a.find(".wolfnet_clearfix").remove();a.hasClass("wolfnet_listingGrid")?u.call(a,d):a.hasClass("wolfnet_propertyList")&&v.call(a,d);d=Number(f)-1+Number(g);a.find(".wolfnet_page_start").text(f);a.find(".wolfnet_page_end").text(d);a.find(".wolfnet_page_items_select select").val(g);a.find(".wolfnet_sortoptions select").val(c);b(this).trigger("wolfnet.listingsRendered",[e])},u=function(a){var d=
b(this),e=d.find(".wolfnet_listings:first").clone();d.data("state");for(var c=0;c<a.length;c++){var f=a[c].branding.brokerLogo||null,g=a[c].branding.content||null,j=a[c].city+", "+a[c].state+" "+a[c].zip_code,i=a[c].display_address+", "+j,h=null==f&&null==g?!1:!0,k=b("<div>").addClass("wolfnet_listing").addClass(h?"wolfnet_branded":"").attr("id","wolfnet_listing_"+a[c].property_id).appendTo(e),k=b("<a>").attr("href",a[c].property_url).appendTo(k),l=b("<span>").addClass("wolfnet_listingImage").appendTo(k);
b("<img>").attr("src",a[c].thumbnail_url).appendTo(l);b("<span>").addClass("wolfnet_price").attr("itemprop","price").html(m(a[c].listing_price)).appendTo(k);b("<span>").addClass("wolfnet_bed_bath").attr("title",a[c].bedrooms+" Bedrooms & "+a[c].bathroom+" Bathrooms").html(a[c].bedrooms+"bd/"+a[c].bathroom+"ba").appendTo(k);j=b("<span>").attr("title",i).append(b("<span>").addClass("wolfnet_address").html(a[c].display_address.wntTruncateString(25))).append(b("<span>").addClass("wolfnet_location").attr("itemprop",
"locality").html(j.wntTruncateString(25))).append(b("<span>").addClass("wolfnet_full_address").attr("itemprop","street_address").css("display","none").html(i)).appendTo(k);h&&(h=b("<div>").addClass("wolfnet_branding").insertAfter(j),null!=f&&b("<span>").addClass("wolfnet_brokerLogo").append(b("<img>").attr("src",f)).appendTo(h),null!=g&&b("<span>").addClass("wolfnet_brandingMessage").html(g).appendTo(h))}d.find(".wolfnet_listings:first").replaceWith(e);d.wolfnetListingGrid("reload")},v=function(a){var d=
b(this),e=d.find(".wolfnet_listings:first").clone();d.data("state");for(var c=0;c<a.length;c++){var f=a[c].display_address+", "+(a[c].city+", "+a[c].state+" "+a[c].zip_code),g=b("<div>").addClass("wolfnet_listing").attr("id","wolfnet_listing_"+a[c].property_id).appendTo(e),g=b("<a>").attr({href:a[c].property_url,title:f}).appendTo(g);b("<span>").addClass("wolfnet_full_address").html(f).appendTo(g);b("<span>").addClass("wolfnet_price").attr("itemprop","price").html(m(a[c].listing_price)).appendTo(g);
b("<span>").attr("itemprop","street-address").css("display","none").html(f).appendTo(g)}d.find(".wolfnet_listings:first").replaceWith(e);d.wolfnetPropertyList()},x=function(){var a=b(this),d=a.data("state");1>d.startrow-d.numrows?a.find("a.wolfnet_page_nav_prev").addClass("wolfnet_disabled"):a.find("a.wolfnet_page_nav_prev").removeClass("wolfnet_disabled");d.startrow+d.numrows>d.max_results?a.find("a.wolfnet_page_nav_next").addClass("wolfnet_disabled"):a.find("a.wolfnet_page_nav_next").removeClass("wolfnet_disabled")};
return this.each(function(){var a=b(this),d=a.find(".wolfnet_toolbar");a.data("wolfnet.toolbarData",i);var e={refreshing:!1,sort:i.sort,ownerType:i.ownerType,max_results:i.max_results,numrows:Number(d.data("numrows"))||i.numrows,startrow:Number(d.data("startrow"))||i.startrow};a.data("state",e);a.bind("wolfnet.nextPage",r);a.bind("wolfnet.prevPage",q);a.bind("wolfnet.itemsPerPage",s);a.bind("wolfnet.sortChange",t);a.bind("wolfnet.refreshData",p);a.bind("wolfnet.dataLoaded",w);a.bind("wolfnet.listingsRendered",
x);d.is(".wolfnet_withPagination")&&(d.find("a.wolfnet_page_nav_prev").click(function(b){a.trigger("wolfnet.prevPage");b.preventDefault();return!1}),d.find("a.wolfnet_page_nav_next").click(function(b){a.trigger("wolfnet.nextPage");b.preventDefault();return!1}),d.find(".wolfnet_page_items").append(h.call(a[0])),d.filter(".wolfnet_toolbarBottom").find("a.wolfnet_page_nav").click(function(){b("html,body").scrollTop(b(this).closest(".wolfnet_widget").offset().top-100)}),d.filter(".wolfnet_toolbarBottom").find(".wolfnet_page_items_select select").change(function(){b("html,body").scrollTop(b(this).closest(".wolfnet_widget").offset().top-
100)}));if(d.is(".wolfnet_withSortOptions")){var e=o.call(a),c=d.find(".wolfnet_page_info");0!=c.length?c.append(e):d.append(e);d.filter(".wolfnet_toolbarBottom").find(".wolfnet_sortoptions select").change(function(){b("html,body").scrollTop(b(this).closest(".wolfnet_widget").offset().top-100)})}a.trigger("wolfnet.toolbarsRendered")})}}(jQuery);
