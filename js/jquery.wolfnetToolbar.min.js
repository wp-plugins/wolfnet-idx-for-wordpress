"function"!==typeof String.prototype.wolfnetPriceFormat&&(String.prototype.wolfnetPriceFormat=function(){var d=this.valueOf().split(".")[0],d=d.split("").reverse().join("").replace(/(\d{3}(?!$))/g,"$1,").split("").reverse().join("");return"$"+d});
(function(d){var o={sort:"price_desc",maxResults:250,criteria:{},itemsPerPageData:[5,10,15,20,25,30,35,40,45,50],sortOptionsData:[{value:"price_desc",label:"Descending by Price"},{value:"price",label:"Ascending by Price"}]},p=function(b){(this.is(".wolfnet_propertyList")||this.is(".wolfnet_listingGrid"))&&this.find(".wolfnet_listings").children().remove();if(this.is(".wolfnet_propertyList")){for(var a=b,a=d.isArray(a)?a:[],f=d("<div>").addClass("wolfnet_listings"),c=0,g=a.length;c<g;c++){var h=a[c].display_address+
", "+(a[c].city+", "+a[c].state),e=d("<div>").attr("id","wolfnet_listing_"+a[c].property_id).addClass("wolfnet_listing").appendTo(f),e=d("<a>").attr({href:a[c].property_url,title:h}).appendTo(e);d("<span>").addClass("wolfnet_full_address").html(h).appendTo(e);d("<span>").addClass("wolfnet_price").attr("itemprop","price").html(a[c].listing_price.toString().wolfnetPriceFormat()).appendTo(e);d("<span>").attr("itemprop","street-address").css("display","none").html(h).appendTo(e)}this.find(".wolfnet_listings").replaceWith(f)}else if(this.is(".wolfnet_listingGrid")){a=
b;a=d.isArray(a)?a:[];f=d("<div>").addClass("wolfnet_listings");c=0;for(g=a.length;c<g;c++){var i=a[c].branding.brokerLogo||null,h=a[c].branding.branding_type||"",e=a[c].branding.content||null,k=a[c].city+", "+a[c].state,m=a[c].display_address+", "+k,j=i==null&&e==null?false:true,l=d("<div>").addClass("wolfnet_listing").addClass(j?"wolfnet_branded":"").attr("id","wolfnet_listing_"+a[c].property_id).appendTo(f),l=d("<a>").attr("href",a[c].property_url).appendTo(l),n=d("<span>").addClass("wolfnet_listingImage").appendTo(l);
d("<img>").attr("src",a[c].thumbnail_url).appendTo(n);d("<span>").addClass("wolfnet_price").attr("itemprop","price").html(a[c].listing_price.toString().wolfnetPriceFormat()).appendTo(l);n=d("<span>").addClass("wolfnet_bed_bath").attr("title",a[c].bedrooms+" Bedrooms & "+a[c].bathroom+" Bathrooms").appendTo(l);a[c].bedrooms!=""&&a[c].bedrooms!="n/a"&&n.append(a[c].bedrooms+"bd");if(a[c].bathroom!=""&&a[c].bathroom!="n/a"){n.text()!=""&&n.append("/");n.append(a[c].bathroom+"ba")}l=d("<span>").attr("title",
m).appendTo(l);d("<span>").addClass("wolfnet_address").html(a[c].display_address).appendTo(l);d("<span>").addClass("wolfnet_location").attr("itemprop","locality").html(k).appendTo(l);d("<span>").addClass("wolfnet_full_address").attr("itemprop","street_address").css("display","none").html(m).appendTo(l);if(j){k=d("<div>").addClass("wolfnet_branding").insertAfter(l);if(i!=null){i=d("<span>").addClass("wolfnet_brokerLogo").append(d("<img>").attr("src",i)).appendTo(k);h=="idx"&&i.addClass("wolfnet_idxLogo")}e!=
null&&d("<span>").addClass("wolfnet_brandingMessage").html(e).appendTo(k)}}this.find(".wolfnet_listings").replaceWith(f)}if(this.find(".wolfnet_wntMainMap").length>0){b=d.isArray(b)?b:[];a=this.find(".wolfnet_wntMainMap").data("map");f=wolfnet_ajax.houseoverIcon;a.removeAllShapes();c=0;for(g=b.length;c<g;c++){h=b[c];e="";i=h.bathroom;k=h.bedrooms;m="";k!=""&&k!="n/a"&&(m=k+"bd");if(i!=""&&i!="n/a"){m!=""&&(m=m+"/");m=m+(i+"ba")}i=m;e=e+('<a style="display:block" rel="follow" href="'+h.property_url+
'">');e=e+('<div class="wolfnet_wntHouseOverWrapper"><div data-property-id="'+h.property_id);e=e+'" class="wntHOItem"><table class="wolfnet_wntHOTable"><tbody><tr>';e=e+'<td class="wntHOImgCol" valign="top" style="vertical-align:top;"><div class="wolfnet_wntHOImg">';e=e+('<img src="'+h.thumbnail_url+'" style="max-height:100px;width:auto"></div><div class="wolfnet_wntHOBroker" style="text-align: center">');e=e+('<img class="wolfnet_wntHOBrokerLogo" src="'+h.branding.brokerLogo+'" alt="Broker Reciprocity">');
e=e+'</div></td><td valign="top" style="vertical-align:top;"><div class="wolfnet_wntHOContentContainer">';e=e+('<div style="text-align:left;font-weight:bold">'+h.listing_price.toString().wolfnetPriceFormat()+"</div>");e=e+('<div style="text-align:left;">'+h.display_address+'</div><div style="text-align:left;">');e=e+(h.city+", "+h.state+'</div><div style="text-align:left;">'+i);e=e+('</div><div style="text-align:left;padding-top:20px;">'+h.branding.content+"</div>");houseoverHtml=e=e+"</div></td></tr></tbody></table></div></div></a>";
h=a.mapIcon(f,30,30);h=a.poi(b[c].lat,b[c].lng,h,houseoverHtml,b[c].property_id,b[c].property_url);a.addPoi(h)}a.bestFit()}this.trigger("wolfnet.updated")},q=function(){var b=d(this),a=b.find("span.wolfnet_page_items_select"),f=b.data("wolfnetToolbar.state"),c=b.data("wolfnetToolbar.options");if(a.length==0&&b.is(".wolfnet_withPagination")){var g=d("<select>");g.change(function(){f.numrows=d(this).val();b.data("wolfnetToolbar.state",f);b.find("span.wolfnet_page_items_select select").val(f.numrows);
j.update.call(b)});for(var a=0,h=c.itemsPerPageData.length;a<h;a++){var e=c.itemsPerPageData[a];d("<option>").attr("value",e).text(e).appendTo(g)}a=d("<span>").addClass("wolfnet_page_items_select");a.append(g).append("per page");a.appendTo(b.find(".wolfnet_toolbar .wolfnet_page_items"))}b.find("span.wolfnet_page_items_select select").each(function(){d(this).val(Number(f.numrows))})},r=function(){var b=d(this),a=b.find("span.wolfnet_sortoptions select"),f=b.data("wolfnetToolbar.state"),c=b.data("wolfnetToolbar.options");
if(a.length==0&&b.is(".wolfnet_withSortOptions")){var g=d("<select>");g.change(function(){f.sort=d(this).val();b.data("wolfnetToolbar.state",f);b.find("span.wolfnet_sortoptions select").val(f.sort);j.update.call(b)});for(var a=0,h=c.sortOptionsData.length;a<h;a++){var e=c.sortOptionsData[a];d("<option>").text(e.label).attr("value",e.value).appendTo(g)}a=d("<span>").addClass("wolfnet_sortoptions");a.append(g);a.appendTo(b.find(".wolfnet_toolbar .wolfnet_page_info"))}b.find("span.wolfnet_sortoptions select").each(function(){d(this).val(f.sort)})},
s=function(){var b=d(this),a=b.find("a.wolfnet_page_nav_next"),f=b.find("a.wolfnet_page_nav_prev"),c=b.data("wolfnetToolbar.state"),g=b.data("wolfnetToolbar.options"),h=Math.ceil(g.maxResults/c.numrows);c.page<=1?f.addClass("wolfnet_disabled"):f.removeClass("wolfnet_disabled");c.page>=h?a.addClass("wolfnet_disabled"):a.removeClass("wolfnet_disabled");a=Number(c.startrow)-1+Number(c.numrows);Number(g.maxResults)<a&&(a=Number(g.maxResults));b.find(".wolfnet_page_start").text(c.startrow);b.find(".wolfnet_page_end").text(a);
d("html,body").scrollTop(b.closest(".wolfnet_widget").offset().top-100);b.is(".wolfnet_listingGrid")&&b.wolfnetListingGrid&&b.wolfnetListingGrid("resizeWidth");b.removeClass("wolfnet_refreshing");return true},j={init:function(b){return this.each(function(){var a=d(this),f=d.extend(true,{},o,b),c=d.extend(true,{},f.criteria,f,{page:1});delete f.criteria;delete c.criteria;delete c.prices;delete c.ownertypes;delete c.savedsearches;for(var g in c){var h=g.indexOf("_wpname")!==-1,e=g.indexOf("_wpid")!==
-1,i=g.indexOf("_wpc")!==-1,k=g.indexOf("_wps")!==-1;(h||e||i||k)&&delete c[g]}c.maxresults=f.maxResults;d.inArray(Number(c.numrows),f.itemsPerPageData)===-1&&f.itemsPerPageData.push(Number(c.numrows));f.itemsPerPageData.sort(function(a,c){return a-c});a.data("wolfnetToolbar.options",f);a.data("wolfnetToolbar.state",c);q.call(a);r.call(a);a.click(function(c){var b=d(c.target);if(b.is("a.wolfnet_page_nav_next")||b.parent().is("a.wolfnet_page_nav_next")){c.preventDefault();j.next.call(a);return false}if(b.is("a.wolfnet_page_nav_prev")||
b.parent().is("a.wolfnet_page_nav_prev")){c.preventDefault();j.prev.call(a);return false}return true});a.on("wolfnet.updated",s)})},update:function(){return this.each(function(){var b=d(this),a=b.data("wolfnetToolbar.state");d.ajax({url:wolfnet_ajax.ajaxurl,dataType:"jsonp",data:function(){var b=d.extend(a,{});delete b.itemsPerPageData;delete b.sortOptionsData;return d.extend(a,{action:"wolfnet_get_listings"})}(),beforeSend:function(){b.addClass("wolfnet_refreshing")}}).done(function(a){p.call(b,
a)}).fail(function(){b.removeClass("wolfnet_refreshing")}).always(function(){})})},next:function(){return this.each(function(){var b=d(this),a=b.data("wolfnetToolbar.state").page+1;j.page.call(b,a)})},prev:function(){return this.each(function(){var b=d(this),a=b.data("wolfnetToolbar.state").page-1;j.page.call(b,a)})},page:function(b){return this.each(function(){var a=d(this),f=a.data("wolfnetToolbar.options"),c=a.data("wolfnetToolbar.state"),f=Math.ceil(f.maxResults/Number(c.numrows)),g=b;g<1?g=f:
g>f&&(g=1);a.data("wolfnetToolbar.state",d.extend(c,{page:g,startrow:(g-1)*Number(c.numrows)+1}));j.update.call(a)})}};d.fn.wolfnetToolbar=function(b){if(j[b])return j[b].apply(this,Array.prototype.slice.call(arguments,1));if(typeof b==="object"||!b)return j.init.apply(this,arguments);d.error("Method "+b+" does not exist on jQuery."+pluginName)}})(jQuery);
