"undefined"!=typeof jQuery&&function(a){var q=function(a){a=a.toString();a=a.split(".")[0];a=a.split("").reverse().join("").replace(/(\d{3}(?!$))/g,"$1,").split("").reverse().join("");return"$"+a};a.fn.wolfnetToolbar=function(f){var f=a.extend({usesPagination:!1,page:1,startrow:1,numrows:20,sort:"",total_rows:250,max_results:250,criteria:{},showSortOptions:!1},f),l,s=function(){var c=a(this),b=a(this).data("state"),d=[],e=a('<a title="Previous Page" href="javascript:;">').addClass("wolfnet_page_nav wolfnet_page_nav_prev").html("<span>Previous</span>").click(function(){c.trigger("wolfnet.prevPage",
[this])});d.push(e[0]);e=a("<span>").addClass("wolfnet_page_info").append(function(){return a("<span>").addClass("wolfnet_page_items").append(a("<span>").addClass("wolfnet_page_start").text(b.startrow)).append("-").append(a("<span>").addClass("wolfnet_page_end").text(b.numrows)).append(" of ").append(a("<span>").addClass("wolfnet_page_total").text(b.max_results))}).append(function(){return a("<span>").addClass("wolfnet_page_items_select").append(function(){var b=a("<select>");b.change(function(){c.trigger("wolfnet.itemsPerPage",
[a(this).val(),this])});b.append(r.call(c));return b}).append("per page")});d.push(e[0]);e=a('<a title="Next Page" href="javascript:;">').addClass("wolfnet_page_nav wolfnet_page_nav_next").html("<span>Next</span>").click(function(){c.trigger("wolfnet.nextPage",[this])});d.push(e[0]);return d},n=function(){var c=a(this);return a("<span>").addClass("wolfnet_sortoptions").append(function(){var b=a("<select>");b.change(function(){c.trigger("wolfnet.sortChange",[a(this).val(),this])});b.append(t.call(c));
return b})},r=function(){a(this).on("wolfnet.toolbarsRendered",function(){var c=a(this).find(".wolfnet_page_items_select select"),b=a(this).data("state");a.ajax({url:"?pagename=wolfnet-get-showNumberOfListings-dropdown",dataType:"json"}).done(function(d){c.children().remove();if(-1==a.inArray(b.numrows)){for(var e=[],f=!1,j=0;j<d.length;j++)!f&&d[j]>b.numrows&&(e[e.length]=b.numrows,f=!0),e[e.length]=d[j];d=e}for(e=0;e<d.length;e++)f=a("<option>",{value:d[e],text:d[e]}),d[e]==b.numrows&&f.attr("selected",
"selected"),c.append(f)})});return""},t=function(){a(this).on("wolfnet.toolbarsRendered",function(){var c=a(this).find(".wolfnet_sortoptions select");a(this).data("state");a.ajax({url:"?pagename=wolfnet-get-sortOptions-dropdown",dataType:"json"}).done(function(b){c.children().remove();for(var d=0;d<b.length;d++)c.append(a("<option>",{value:b[d].value,text:b[d].label}))})});return""},u=function(c,b){var d=a(this),e=d.data("state");if(!e.refreshing){var f=d.data("wolfnetToolbarData"),j=a.extend(e,f.criteria);
e.startrow=Number(e.numrows)*(Number(e.page)-1)+1;j.ownerType=f.ownerType;a.ajax({url:"?pagename=wolfnet-listings-get",dataType:"json",data:j,beforeSend:function(){e.refreshing=!0;d.find(".wolfnet_listings").addClass("wolfnet_refreshing")}}).done(function(a){d.trigger("wolfnet.dataLoaded",[a,b])}).always(function(){e.refreshing=!1;d.find(".wolfnet_listings").removeClass("wolfnet_refreshing")})}},v=function(c,b){var d=a(this).data("state"),e=d.page-1;!d.refreshing&&0<e&&(d.page=e,a(this).data("state",
d),a(this).trigger("wolfnet.refreshData",b))},w=function(c,b){var d=a(this).data("state"),e=Math.ceil(Number(d.total_rows<l?d.total_rows:l)/Number(d.numrows)),f=d.page+1;!d.refreshing&&f<=e&&(d.page=f,a(this).data("state",d),a(this).trigger("wolfnet.refreshData",[b]))},x=function(c,b,d){c=a(this).data("state");!c.refreshing&&b!=c.total_rows&&(c.numrows=b,c.page=1,c.startrow=1,a(this).data("state",c),a(this).find(".wolfnet_page_items_select select").val(b),a(this).trigger("wolfnet.refreshData",[d]))},
y=function(c,b,d){c=a(this).data("state");!c.refreshing&&b!=c.sort&&(c.sort=b,a(this).data("state",c),a(this).find(".wolfnet_sortoptions select").val(b),a(this).trigger("wolfnet.refreshData",[d]))},z=function(c,b,d){var c=a(this),e=c.data("state"),f=e.startrow,j=e.numrows,e=e.sort;c.find(".wolfnet_listing").remove();c.find(".wolfnet_clearfix").remove();if(c.hasClass("wolfnet_listingGrid")){for(var g=0;g<b.length;g++){var o=b[g].branding.brokerLogo||null,p=b[g].branding.content||null;if(null==o&&null==
p)var m=!1,h="wolfnet_listing";else m=!0,h="wolfnet_listing wolfnet_branded";h=a("<div>").addClass(h).attr("id","wolfnet_listing_"+b[g].property_id);c.find(".wolfnet_listings").append(h);var i=a("<a>").attr("href",b[g].property_url);h.append(i);h=a("<span>").addClass("wolfnet_listingImage");a("<img>").attr("src",b[g].thumbnail_url).appendTo(h);i.append(h);i=a("<span>").addClass("wolfnet_price").attr("itemprop","price").text(q(b[g].listing_price));h.after(i);var n=a("<span>").addClass("wolfnet_bed_bath").attr("title",
b[g].bedrooms+" Bedrooms & "+b[g].bathroom+" Bathrooms").text(b[g].bedrooms+"bd/"+b[g].bathroom+"ba");i.after(n);var i=b[g].city+", "+b[g].state,k=b[g].display_address+", "+i,h=a("<span>").attr("title",k);a("<span>").addClass("wolfnet_location").attr("itemprop","locality").text(i).appendTo(h);a("<span>").addClass("wolfnet_address").text(b[g].display_address).appendTo(h);a("<span>").addClass("wolfnet_full_address").attr("itemprop","street_address").css("display","none").text(k).appendTo(h);n.after(h);
m&&(m=a("<span>").addClass("wolfnet_branding"),null!=o&&(k=a("<span>").addClass("wolfnet_brokerLogo"),a("<img>").attr("src",o).appendTo(k),k.appendTo(m)),null!=p&&a("<span>").addClass("wolfnet_brandingMessage").text(p).appendTo(m),h.after(m))}c.wolfnetListingGrid("reload")}else if(c.hasClass("wolfnet_propertyList")){for(g=0;g<b.length;g++)h=a("<div>").addClass("wolfnet_listing").attr("id","wolfnet_listing_"+b[g].property_id),c.find(".wolfnet_listings").append(h),i=b[g].city+", "+b[g].state,k=b[g].display_address+
", "+i,i=a("<a>").attr({href:b[g].property_url,title:k}),h.append(i),h=a("<span>").addClass("wolfnet_full_address").text(k),i.append(h),i=a("<span>").addClass("wolfnet_price").attr("itemprop","price").text(q(b[g].listing_price)),h.after(i),o=a("<span>").attr("itemprop","street-address").css("display","none").text(k),i.after(o);c.wolfnetPropertyList()}b=Number(f)-1+Number(j);b>l&&(b=l);c.find(".wolfnet_page_start").text(f);c.find(".wolfnet_page_end").text(b);c.find(".wolfnet_page_items_select select").val(j);
c.find(".wolfnet_sortoptions select").val(e);a(this).trigger("wolfnet.listingsRendered",[d])},A=function(c,b){var d=a(this),e=d.data("state");1>e.page-1?d.find("a.wolfnet_page_nav_prev").addClass("wolfnet_disabled"):d.find("a.wolfnet_page_nav_prev").removeClass("wolfnet_disabled");e.page+1>Math.ceil(Number(e.total_rows<l?e.total_rows:l)/Number(e.numrows))?d.find("a.wolfnet_page_nav_next").addClass("wolfnet_disabled"):d.find("a.wolfnet_page_nav_next").removeClass("wolfnet_disabled");void 0!=b&&a(b).closest(".wolfnet_toolbar")[0]==
a(this).find(".wolfnet_toolbarBottom")[0]&&a("html,body").scrollTop(a(this).offset().top-100)};return this.each(function(){var c=a(this);c.data("wolfnetToolbarData",f);l=f.total_rows>f.max_results?f.max_results:f.total_rows;c.data("state",{page:f.page,startrow:f.startrow,numrows:f.numrows,sort:f.sort,ownerType:f.ownerType,total_rows:f.total_rows,max_results:l,refreshing:!1});if(0<f.total_rows&&(c.bind("wolfnet.nextPage",w),c.bind("wolfnet.prevPage",v),c.bind("wolfnet.itemsPerPage",x),c.bind("wolfnet.sortChange",
y),c.bind("wolfnet.refreshData",u),c.bind("wolfnet.dataLoaded",z),c.bind("wolfnet.listingsRendered",A),!1!==f.usesPagination||!0===f.showSortOptions)){var b=a(this).data("wolfnetToolbarData");a(this).data("state");var d=a("<div>").addClass("wolfnet_toolbar");!1!==b.usesPagination&&b.total_rows>b.numrows&&(d.append(s.call(this)),d.addClass("wolfnet_withPagination"));!0===b.showSortOptions&&(0<d.find(".wolfnet_page_info").length?d.find(".wolfnet_page_info").append(n.call(this)):d.append(n.call(this)),
d.addClass("wolfnet_withSortOptions"));c.find(".wolfnet_listings:first").before(d.clone(!0).addClass("wolfnet_toolbarTop"));c.find(".wolfnet_listings:first").after(d.clone(!0).addClass("wolfnet_toolbarBottom"));c.trigger("wolfnet.toolbarsRendered");c.trigger("wolfnet.listingsRendered")}})}}(jQuery);
