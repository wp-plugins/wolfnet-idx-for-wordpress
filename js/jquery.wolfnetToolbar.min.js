"function"!==typeof String.prototype.wolfnetPriceFormat&&(String.prototype.wolfnetPriceFormat=function(){var d=this.valueOf().split(".")[0],d=d.split("").reverse().join("").replace(/(\d{3}(?!$))/g,"$1,").split("").reverse().join("");return"$"+d});
(function(d){var o={sort:"price_desc",maxResults:250,criteria:{},itemsPerPageData:[5,10,15,20,25,30,35,40,45,50],sortOptionsData:[{value:"price_desc",label:"Descending by Price"},{value:"price",label:"Ascending by Price"}]},n=function(b){(this.is(".wolfnet_propertyList")||this.is(".wolfnet_listingGrid"))&&this.find(".wolfnet_listings").children().remove();if(this.is(".wolfnet_propertyList")){for(var a=b,a=d.isArray(a)?a:[],f=d("<div>").addClass("wolfnet_listings"),c=0,h=a.length;c<h;c++){var g=a[c].display_address+
", "+(a[c].city+", "+a[c].state),e=d("<div>").attr("id","wolfnet_listing_"+a[c].property_id).addClass("wolfnet_listing").appendTo(f),e=d("<a>").attr({href:a[c].property_url,title:g}).appendTo(e);d("<span>").addClass("wolfnet_full_address").html(g).appendTo(e);d("<span>").addClass("wolfnet_price").attr("itemprop","price").html(a[c].listing_price.toString().wolfnetPriceFormat()).appendTo(e);d("<span>").attr("itemprop","street-address").css("display","none").html(g).appendTo(e)}this.find(".wolfnet_listings").replaceWith(f)}else if(this.is(".wolfnet_listingGrid")){a=
b;a=d.isArray(a)?a:[];f=d("<div>").addClass("wolfnet_listings");c=0;for(h=a.length;c<h;c++){var g=a[c].branding.brokerLogo||null,e=a[c].branding.content||null,j=a[c].city+", "+a[c].state,i=a[c].display_address+", "+j,l=g==null&&e==null?false:true,k=d("<div>").addClass("wolfnet_listing").addClass(l?"wolfnet_branded":"").attr("id","wolfnet_listing_"+a[c].property_id).appendTo(f),k=d("<a>").attr("href",a[c].property_url).appendTo(k),m=d("<span>").addClass("wolfnet_listingImage").appendTo(k);d("<img>").attr("src",
a[c].thumbnail_url).appendTo(m);d("<span>").addClass("wolfnet_price").attr("itemprop","price").html(a[c].listing_price.toString().wolfnetPriceFormat()).appendTo(k);m=d("<span>").addClass("wolfnet_bed_bath").attr("title",a[c].bedrooms+" Bedrooms & "+a[c].bathroom+" Bathrooms").appendTo(k);a[c].bedrooms!=""&&a[c].bedrooms!="n/a"&&m.append(a[c].bedrooms+"bd");if(a[c].bathroom!=""&&a[c].bathroom!="n/a"){m.text()!=""&&m.append("/");m.append(a[c].bathroom+"ba")}k=d("<span>").attr("title",i).appendTo(k);
d("<span>").addClass("wolfnet_address").html(a[c].display_address).appendTo(k);d("<span>").addClass("wolfnet_location").attr("itemprop","locality").html(j).appendTo(k);d("<span>").addClass("wolfnet_full_address").attr("itemprop","street_address").css("display","none").html(i).appendTo(k);if(l){j=d("<div>").addClass("wolfnet_branding").insertAfter(k);g!=null&&d("<span>").addClass("wolfnet_brokerLogo").append(d("<img>").attr("src",g)).appendTo(j);e!=null&&d("<span>").addClass("wolfnet_brandingMessage").html(e).appendTo(j)}}this.find(".wolfnet_listings").replaceWith(f)}if(this.find(".wolfnet_wntMainMap").length>
0){b=d.isArray(b)?b:[];a=this.find(".wolfnet_wntMainMap").data("map");f=wolfnet_ajax.houseoverIcon;a.removeAllShapes();c=0;for(h=b.length;c<h;c++){g=b[c];e="";j=g.bathroom;i=g.bedrooms;l="";i!=""&&i!="n/a"&&(l=i+"bd");if(j!=""&&j!="n/a"){l!=""&&(l=l+"/");l=l+(j+"ba")}j=l;e=e+('<a style="display:block" rel="follow" href="'+g.property_url+'">');e=e+('<div class="wolfnet_wntHouseOverWrapper"><div data-property-id="'+g.property_id);e=e+'" class="wntHOItem"><table class="wolfnet_wntHOTable"><tbody><tr>';
e=e+'<td class="wntHOImgCol" valign="top" style="vertical-align:top;"><div class="wolfnet_wntHOImg">';e=e+('<img src="'+g.thumbnail_url+'" style="max-height:100px;width:auto"></div><div class="wolfnet_wntHOBroker" style="text-align: center">');e=e+('<img class="wolfnet_wntHOBrokerLogo" src="'+g.branding.brokerLogo+'" alt="Broker Reciprocity">');e=e+'</div></td><td valign="top" style="vertical-align:top;"><div class="wolfnet_wntHOContentContainer">';e=e+('<div style="text-align:left;font-weight:bold">'+
g.listing_price.toString().wolfnetPriceFormat()+"</div>");e=e+('<div style="text-align:left;">'+g.display_address+'</div><div style="text-align:left;">');e=e+(g.city+", "+g.state+'</div><div style="text-align:left;">'+j);e=e+('</div><div style="text-align:left;padding-top:20px;">'+g.branding.content+"</div>");houseoverHtml=e=e+"</div></td></tr></tbody></table></div></div></a>";g=a.mapIcon(f,30,30);g=a.poi(b[c].lat,b[c].lng,g,houseoverHtml,b[c].property_id,b[c].property_url);a.addPoi(g)}a.bestFit()}this.trigger("wolfnet.updated")},
p=function(){var b=d(this),a=b.find("span.wolfnet_page_items_select"),f=b.data("wolfnetToolbar.state"),c=b.data("wolfnetToolbar.options");if(a.length==0&&b.is(".wolfnet_withPagination")){var h=d("<select>");h.change(function(){f.numrows=d(this).val();b.data("wolfnetToolbar.state",f);b.find("span.wolfnet_page_items_select select").val(f.numrows);i.update.call(b)});for(var a=0,g=c.itemsPerPageData.length;a<g;a++){var e=c.itemsPerPageData[a];d("<option>").attr("value",e).text(e).appendTo(h)}a=d("<span>").addClass("wolfnet_page_items_select");
a.append(h).append("per page");a.appendTo(b.find(".wolfnet_toolbar .wolfnet_page_items"))}b.find("span.wolfnet_page_items_select select").each(function(){d(this).val(Number(f.numrows))})},q=function(){var b=d(this),a=b.find("span.wolfnet_sortoptions select"),f=b.data("wolfnetToolbar.state"),c=b.data("wolfnetToolbar.options");if(a.length==0&&b.is(".wolfnet_withSortOptions")){var h=d("<select>");h.change(function(){f.sort=d(this).val();b.data("wolfnetToolbar.state",f);b.find("span.wolfnet_sortoptions select").val(f.sort);
i.update.call(b)});for(var a=0,g=c.sortOptionsData.length;a<g;a++){var e=c.sortOptionsData[a];d("<option>").text(e.label).attr("value",e.value).appendTo(h)}a=d("<span>").addClass("wolfnet_sortoptions");a.append(h);a.appendTo(b.find(".wolfnet_toolbar .wolfnet_page_info"))}b.find("span.wolfnet_sortoptions select").each(function(){d(this).val(f.sort)})},r=function(){var b=d(this),a=b.find("a.wolfnet_page_nav_next"),f=b.find("a.wolfnet_page_nav_prev"),c=b.data("wolfnetToolbar.state"),h=b.data("wolfnetToolbar.options"),
g=Math.ceil(h.maxResults/c.numrows);c.page<=1?f.addClass("wolfnet_disabled"):f.removeClass("wolfnet_disabled");c.page>=g?a.addClass("wolfnet_disabled"):a.removeClass("wolfnet_disabled");a=Number(c.startrow)-1+Number(c.numrows);Number(h.maxResults)<a&&(a=Number(h.maxResults));b.find(".wolfnet_page_start").text(c.startrow);b.find(".wolfnet_page_end").text(a);d("html,body").scrollTop(b.closest(".wolfnet_widget").offset().top-100);b.is(".wolfnet_listingGrid")&&b.wolfnetListingGrid&&b.wolfnetListingGrid("resizeWidth");
b.removeClass("wolfnet_refreshing");return true},i={init:function(b){return this.each(function(){var a=d(this),f=d.extend(true,{},o,b),c=d.extend(true,{},f.criteria,f,{page:1});delete f.criteria;delete c.criteria;delete c.prices;delete c.ownertypes;delete c.savedsearches;for(var h in c){var g=h.indexOf("_wpname")!==-1,e=h.indexOf("_wpid")!==-1,j=h.indexOf("_wpc")!==-1,n=h.indexOf("_wps")!==-1;(g||e||j||n)&&delete c[h]}c.maxresults=f.maxResults;d.inArray(Number(c.numrows),f.itemsPerPageData)===-1&&
f.itemsPerPageData.push(Number(c.numrows));f.itemsPerPageData.sort(function(a,c){return a-c});a.data("wolfnetToolbar.options",f);a.data("wolfnetToolbar.state",c);p.call(a);q.call(a);a.click(function(c){var b=d(c.target);if(b.is("a.wolfnet_page_nav_next")||b.parent().is("a.wolfnet_page_nav_next")){c.preventDefault();i.next.call(a);return false}if(b.is("a.wolfnet_page_nav_prev")||b.parent().is("a.wolfnet_page_nav_prev")){c.preventDefault();i.prev.call(a);return false}return true});a.on("wolfnet.updated",
r)})},update:function(){return this.each(function(){var b=d(this),a=b.data("wolfnetToolbar.state");d.ajax({url:wolfnet_ajax.ajaxurl,dataType:"jsonp",data:function(){var b=d.extend(a,{});delete b.itemsPerPageData;delete b.sortOptionsData;return d.extend(a,{action:"wolfnet_get_listings"})}(),beforeSend:function(){b.addClass("wolfnet_refreshing")}}).done(function(a){n.call(b,a)}).fail(function(){b.removeClass("wolfnet_refreshing")}).always(function(){})})},next:function(){return this.each(function(){var b=
d(this),a=b.data("wolfnetToolbar.state").page+1;i.page.call(b,a)})},prev:function(){return this.each(function(){var b=d(this),a=b.data("wolfnetToolbar.state").page-1;i.page.call(b,a)})},page:function(b){return this.each(function(){var a=d(this),f=a.data("wolfnetToolbar.options"),c=a.data("wolfnetToolbar.state"),f=Math.ceil(f.maxResults/Number(c.numrows)),h=b;h<1?h=f:h>f&&(h=1);a.data("wolfnetToolbar.state",d.extend(c,{page:h,startrow:(h-1)*Number(c.numrows)+1}));i.update.call(a)})}};d.fn.wolfnetToolbar=
function(b){if(i[b])return i[b].apply(this,Array.prototype.slice.call(arguments,1));if(typeof b==="object"||!b)return i.init.apply(this,arguments);d.error("Method "+b+" does not exist on jQuery."+pluginName)}})(jQuery);
