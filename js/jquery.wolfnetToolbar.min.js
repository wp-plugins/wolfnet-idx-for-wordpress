"undefined"!=typeof jQuery&&function(b){var m=function(b){b=b.toString();b=b.split(".")[0];b=b.split("").reverse().join("").replace(/(\d{3}(?!$))/g,"$1,").split("").reverse().join("");return"$"+b};b.fn.wolfnetToolbar=function(h){var h=b.extend({sort:"",max_results:250,criteria:{}},h),n=function(){return b("<span>").addClass("wolfnet_page_items_select").append(b("<select>").change(function(a){b(this).trigger("wolfnet.itemsPerPage",[b(this).val(),this]);a.preventDefault();return!1}).append(l.call(this))).append("per page")},
l=function(){var a=b(this);a.bind("wolfnet.toolbarsRendered",function(){var d=a.find(".wolfnet_page_items_select select"),e=a.data("state");b.ajax({url:"?pagename=wolfnet-get-showNumberOfListings-dropdown",dataType:"json"}).done(function(a){d.children().remove();if(-1==b.inArray(e.numrows,a)){for(var f=[],g=!1,i=0;i<a.length;i++)!g&&a[i]>e.numrows&&(f[f.length]=e.numrows,g=!0),f[f.length]=a[i];a=f}for(f=0;f<a.length;f++)g=b("<option>",{value:a[f],text:a[f]}),a[f]==e.numrows&&g.attr("selected","selected"),
d.append(g)})});return""},p=function(){return b("<span>").addClass("wolfnet_sortoptions").append(b("<select>").change(function(a){b(this).trigger("wolfnet.sortChange",[b(this).val(),this]);a.preventDefault();return!1}).append(o.call(this)))},o=function(){var a=b(this);a.bind("wolfnet.toolbarsRendered",function(){var d=a.find(".wolfnet_sortoptions select");a.data("state");b.ajax({url:"?pagename=wolfnet-get-sortOptions-dropdown",dataType:"json"}).done(function(a){d.children().remove();for(var c=0;c<
a.length;c++)d.append(b("<option>",{value:a[c].value,text:a[c].label}))})});return""},q=function(a,d){var e=b(this),c=e.data("state");if(!c.refreshing){var f=e.data("wolfnet.toolbarData"),g=b.extend(c,f.criteria);g.ownerType=f.ownerType;delete g.pagename;b.ajax({url:"?pagename=wolfnet-listings-get",dataType:"json",data:g,beforeSend:function(){c.refreshing=!0;e.find(".wolfnet_listings").addClass("wolfnet_refreshing")}}).done(function(a){e.trigger("wolfnet.dataLoaded",[a,d])}).always(function(){c.refreshing=
!1;e.find(".wolfnet_listings").removeClass("wolfnet_refreshing")})}},r=function(a,d){var e=b(this).data("state"),c=Number(e.startrow)-Number(e.numrows);1>c&&(c=e.max_results-e.numrows+1);1>c&&(c=e.startrow);!e.refreshing&&1<=c&&(e.startrow=c,b(this).data("state",e),b(this).trigger("wolfnet.refreshData",d))},s=function(a,d){var e=b(this).data("state"),c=Number(e.startrow)+Number(e.numrows);c>=e.max_results&&(c=1);!e.refreshing&&c<=e.max_results&&(e.startrow=c,b(this).data("state",e),b(this).trigger("wolfnet.refreshData",
[d]))},t=function(a,d,e){a=b(this).data("state");!a.refreshing&&d<=a.max_results&&(a.numrows=Number(d),a.startrow=1,b(this).data("state",a),b(this).find(".wolfnet_page_items_select select").val(d),b(this).trigger("wolfnet.refreshData",[e]))},u=function(a,d,e){a=b(this).data("state");!a.refreshing&&d!=a.sort&&(a.sort=d,b(this).data("state",a),b(this).find(".wolfnet_sortoptions select").val(d),b(this).trigger("wolfnet.refreshData",[e]))},x=function(a,d,e){var a=b(this),c=a.data("state"),f=c.startrow,
g=c.numrows,c=c.sort;a.find(".wolfnet_listing").remove();a.find(".wolfnet_clearfix").remove();a.hasClass("wolfnet_listingGrid")?v.call(a,d):a.hasClass("wolfnet_propertyList")&&w.call(a,d);d=Number(f)-1+Number(g);a.find(".wolfnet_page_start").text(f);a.find(".wolfnet_page_end").text(d);a.find(".wolfnet_page_items_select select").val(g);a.find(".wolfnet_sortoptions select").val(c);b(this).trigger("wolfnet.listingsRendered",[e])},v=function(a){var d=b(this),e=d.find(".wolfnet_listings:first").clone();
d.data("state");for(var c=0;c<a.length;c++){var f=a[c].branding.brokerLogo||null,g=a[c].branding.content||null,i=a[c].city+", "+a[c].state,h=a[c].display_address+", "+i,k=null==f&&null==g?!1:!0,j=b("<div>").addClass("wolfnet_listing").addClass(k?"wolfnet_branded":"").attr("id","wolfnet_listing_"+a[c].property_id).appendTo(e),j=b("<a>").attr("href",a[c].property_url).appendTo(j),l=b("<span>").addClass("wolfnet_listingImage").appendTo(j);b("<img>").attr("src",a[c].thumbnail_url).appendTo(l);b("<span>").addClass("wolfnet_price").attr("itemprop",
"price").html(m(a[c].listing_price)).appendTo(j);b("<span>").addClass("wolfnet_bed_bath").attr("title",a[c].bedrooms+" Bedrooms & "+a[c].bathroom+" Bathrooms").html(a[c].bedrooms+"bd/"+a[c].bathroom+"ba").appendTo(j);i=b("<span>").attr("title",h).append(b("<span>").addClass("wolfnet_location").attr("itemprop","locality").html(i)).append(b("<span>").addClass("wolfnet_address").html(a[c].display_address)).append(b("<span>").addClass("wolfnet_full_address").attr("itemprop","street_address").css("display",
"none").html(h)).appendTo(j);k&&(k=b("<div>").addClass("wolfnet_branding").insertAfter(i),null!=f&&b("<span>").addClass("wolfnet_brokerLogo").append(b("<img>").attr("src",f)).appendTo(k),null!=g&&b("<span>").addClass("wolfnet_brandingMessage").html(g).appendTo(k))}d.find(".wolfnet_listings:first").replaceWith(e);d.wolfnetListingGrid("reload")},w=function(a){var d=b(this),e=d.find(".wolfnet_listings:first").clone();d.data("state");for(var c=0;c<a.length;c++){var f=a[c].display_address+", "+(a[c].city+
", "+a[c].state),g=b("<div>").addClass("wolfnet_listing").attr("id","wolfnet_listing_"+a[c].property_id).appendTo(e),g=b("<a>").attr({href:a[c].property_url,title:f}).appendTo(g);b("<span>").addClass("wolfnet_full_address").html(f).appendTo(g);b("<span>").addClass("wolfnet_price").attr("itemprop","price").html(m(a[c].listing_price)).appendTo(g);b("<span>").attr("itemprop","street-address").css("display","none").html(f).appendTo(g)}d.find(".wolfnet_listings:first").replaceWith(e);d.wolfnetPropertyList()},
y=function(){var a=b(this),d=a.data("state");1>d.startrow-d.numrows?a.find("a.wolfnet_page_nav_prev").addClass("wolfnet_disabled"):a.find("a.wolfnet_page_nav_prev").removeClass("wolfnet_disabled");d.startrow+d.numrows>d.max_results?a.find("a.wolfnet_page_nav_next").addClass("wolfnet_disabled"):a.find("a.wolfnet_page_nav_next").removeClass("wolfnet_disabled")};return this.each(function(){var a=b(this),d=a.find(".wolfnet_toolbar");a.data("wolfnet.toolbarData",h);var e={refreshing:!1,sort:h.sort,ownerType:h.ownerType,
max_results:h.max_results,numrows:Number(d.data("numrows"))||h.numrows,startrow:Number(d.data("startrow"))||h.startrow};a.data("state",e);a.bind("wolfnet.nextPage",s);a.bind("wolfnet.prevPage",r);a.bind("wolfnet.itemsPerPage",t);a.bind("wolfnet.sortChange",u);a.bind("wolfnet.refreshData",q);a.bind("wolfnet.dataLoaded",x);a.bind("wolfnet.listingsRendered",y);d.is(".wolfnet_withPagination")&&(d.find("a.wolfnet_page_nav_prev").click(function(b){a.trigger("wolfnet.prevPage");b.preventDefault();return!1}),
d.find("a.wolfnet_page_nav_next").click(function(b){a.trigger("wolfnet.nextPage");b.preventDefault();return!1}),d.find(".wolfnet_page_items").append(n.call(a[0])),d.filter(".wolfnet_toolbarBottom").find("a.wolfnet_page_nav").click(function(){b("html,body").scrollTop(b(this).closest(".wolfnet_widget").offset().top-100)}),d.filter(".wolfnet_toolbarBottom").find(".wolfnet_page_items_select select").change(function(){b("html,body").scrollTop(b(this).closest(".wolfnet_widget").offset().top-100)}));if(d.is(".wolfnet_withSortOptions")){var e=
p.call(a),c=d.find(".wolfnet_page_info");0!=c.length?c.append(e):d.append(e);d.filter(".wolfnet_toolbarBottom").find(".wolfnet_sortoptions select").change(function(){b("html,body").scrollTop(b(this).closest(".wolfnet_widget").offset().top-100)})}a.trigger("wolfnet.toolbarsRendered")})}}(jQuery);
